{"ast":null,"code":"var _jsxFileName = \"/Users/jossanymoura/Dev/projetos/trivia/sd-012-project-trivia-react-redux/src/pages/GameScreen.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { func, arrayOf, objectOf, bool, number } from 'prop-types';\nimport Header from '../components/Header/Header';\nimport fetchQuestions from '../fetchs/fetchQuestions';\nimport QuestionCategory from '../components/Question/QuestionCategory';\nimport QuestionText from '../components/Question/QuestionText';\nimport QuestionAnswers from '../components/Question/QuestionAnswers';\nimport { setAnsweredTrueIncorrect, setStoreScore } from '../actions';\nimport calculateScore from '../functions/calculateScore';\nimport saveInfoLocalStorage from '../functions/saveInfoLocalStorage';\n\nclass GameScreen extends Component {\n  constructor() {\n    super();\n    this.state = {\n      timer: 30\n    };\n    this.countdown = this.countdown.bind(this);\n    this.startTimer = this.startTimer.bind(this);\n  }\n\n  componentDidMount() {\n    const dispatchQuestions = this.props.dispatchQuestions;\n    dispatchQuestions();\n    this.startTimer();\n  }\n\n  componentDidUpdate() {\n    const state = this.state;\n    const timer = this.state.timer;\n    const _this$props = this.props,\n          getQuestions = _this$props.getQuestions,\n          getQuestionNumber = _this$props.getQuestionNumber,\n          isCorrect = _this$props.isCorrect,\n          name = _this$props.name,\n          email = _this$props.email,\n          getScore = _this$props.getScore,\n          getAssertions = _this$props.getAssertions;\n    const _this$props2 = this.props,\n          answered = _this$props2.answered,\n          answeredTrueIncorrect = _this$props2.answeredTrueIncorrect,\n          storeScore = _this$props2.storeScore;\n\n    if (answered === true) {\n      clearInterval(this.interval);\n      const score = calculateScore(timer, getQuestions[getQuestionNumber].difficulty, isCorrect);\n      storeScore(score);\n      saveInfoLocalStorage(name, email);\n    }\n\n    if (state.timer === 0) {\n      clearInterval(this.interval);\n      answeredTrueIncorrect();\n    }\n  }\n\n  countdown() {\n    const timer = this.state.timer;\n    this.setState({\n      timer: timer - 1\n    });\n  }\n\n  startTimer() {\n    const timer = this.state.timer;\n    const start = 30;\n\n    if (timer !== start) {\n      this.setState({\n        timer: 30\n      });\n    }\n\n    const setTimer = 1000;\n    this.interval = setInterval(this.countdown, setTimer);\n  }\n\n  render() {\n    const _this$props3 = this.props,\n          getQuestions = _this$props3.getQuestions,\n          getLoading = _this$props3.getLoading,\n          getQuestionNumber = _this$props3.getQuestionNumber;\n    const timer = this.state.timer;\n    if (getLoading) return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Loading...\");\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Header, {\n      timer: timer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(QuestionCategory, {\n      category: getQuestions[getQuestionNumber].category,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(QuestionText, {\n      question: getQuestions[getQuestionNumber].question,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(QuestionAnswers, {\n      startTimer: this.startTimer,\n      type: getQuestions[getQuestionNumber].type,\n      correctAnswer: getQuestions[getQuestionNumber].correct_answer,\n      wrongAnswers: getQuestions[getQuestionNumber].incorrect_answers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapDispathToProps = dispatch => ({\n  dispatchQuestions: questions => dispatch(fetchQuestions(questions)),\n  answeredTrueIncorrect: () => dispatch(setAnsweredTrueIncorrect()),\n  storeScore: score => dispatch(setStoreScore(score))\n});\n\nconst mapStateToProps = ({\n  questions,\n  player\n}) => ({\n  getQuestions: questions.questions,\n  getQuestionsDifficulty: questions.difficulty,\n  getLoading: questions.loading,\n  getQuestionNumber: questions.questionNumber,\n  answered: questions.answered,\n  isCorrect: questions.correct,\n  name: player.name,\n  email: player.gravatarEmail,\n  getScore: questions.score,\n  getAssertions: questions.assertions\n});\n\nGameScreen.propTypes = {\n  dispatchQuestions: func.isRequired,\n  getQuestions: arrayOf(objectOf).isRequired,\n  getLoading: bool.isRequired,\n  getQuestionNumber: number.isRequired,\n  answered: bool.isRequired,\n  answeredTrueIncorrect: func.isRequired,\n  storeScore: func.isRequired,\n  isCorrect: bool.isRequired\n};\nexport default connect(mapStateToProps, mapDispathToProps)(GameScreen);","map":{"version":3,"sources":["/Users/jossanymoura/Dev/projetos/trivia/sd-012-project-trivia-react-redux/src/pages/GameScreen.js"],"names":["React","Component","connect","func","arrayOf","objectOf","bool","number","Header","fetchQuestions","QuestionCategory","QuestionText","QuestionAnswers","setAnsweredTrueIncorrect","setStoreScore","calculateScore","saveInfoLocalStorage","GameScreen","constructor","state","timer","countdown","bind","startTimer","componentDidMount","dispatchQuestions","props","componentDidUpdate","getQuestions","getQuestionNumber","isCorrect","name","email","getScore","getAssertions","answered","answeredTrueIncorrect","storeScore","clearInterval","interval","score","difficulty","setState","start","setTimer","setInterval","render","getLoading","category","question","type","correct_answer","incorrect_answers","mapDispathToProps","dispatch","questions","mapStateToProps","player","getQuestionsDifficulty","loading","questionNumber","correct","gravatarEmail","assertions","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { func, arrayOf, objectOf, bool, number } from 'prop-types';\nimport Header from '../components/Header/Header';\nimport fetchQuestions from '../fetchs/fetchQuestions';\nimport QuestionCategory from '../components/Question/QuestionCategory';\nimport QuestionText from '../components/Question/QuestionText';\nimport QuestionAnswers from '../components/Question/QuestionAnswers';\nimport { setAnsweredTrueIncorrect, setStoreScore } from '../actions';\nimport calculateScore from '../functions/calculateScore';\nimport saveInfoLocalStorage from '../functions/saveInfoLocalStorage';\n\nclass GameScreen extends Component {\n  constructor() {\n    super();\n    this.state = {\n      timer: 30,\n    };\n\n    this.countdown = this.countdown.bind(this);\n    this.startTimer = this.startTimer.bind(this);\n  }\n\n  componentDidMount() {\n    const { dispatchQuestions } = this.props;\n    dispatchQuestions();\n    this.startTimer();\n  }\n\n  componentDidUpdate() {\n    const { state } = this;\n    const { timer } = this.state;\n    const { getQuestions, getQuestionNumber, isCorrect, name, email, getScore, getAssertions } = this.props;\n    const { answered, answeredTrueIncorrect, storeScore } = this.props;\n    if (answered === true) {\n      clearInterval(this.interval);\n      const score = calculateScore(\n        timer,\n        getQuestions[getQuestionNumber].difficulty,\n        isCorrect,\n      );\n      storeScore(score);\n      saveInfoLocalStorage(name, email);\n    }\n    if (state.timer === 0) {\n      clearInterval(this.interval);\n      answeredTrueIncorrect();\n    }\n  }\n\n  countdown() {\n    const { timer } = this.state;\n    this.setState({\n      timer: timer - 1,\n    });\n  }\n\n  startTimer() {\n    const { timer } = this.state;\n    const start = 30;\n    if (timer !== start) {\n      this.setState({\n        timer: 30,\n      });\n    }\n    const setTimer = 1000;\n    this.interval = setInterval(this.countdown, setTimer);\n  }\n\n  render() {\n    const { getQuestions, getLoading, getQuestionNumber } = this.props;\n    const { timer } = this.state;\n    if (getLoading) return <p>Loading...</p>;\n    return (\n      <div>\n        <Header timer={ timer } />\n        <QuestionCategory\n          category={ getQuestions[getQuestionNumber].category }\n        />\n        <QuestionText\n          question={ getQuestions[getQuestionNumber].question }\n        />\n        <QuestionAnswers\n          startTimer={ this.startTimer }\n          type={ getQuestions[getQuestionNumber].type }\n          correctAnswer={ getQuestions[getQuestionNumber].correct_answer }\n          wrongAnswers={ getQuestions[getQuestionNumber].incorrect_answers }\n        />\n      </div>\n    );\n  }\n}\n\nconst mapDispathToProps = (dispatch) => ({\n  dispatchQuestions: (questions) => (dispatch(fetchQuestions(questions))),\n  answeredTrueIncorrect: () => dispatch(setAnsweredTrueIncorrect()),\n  storeScore: (score) => dispatch(setStoreScore(score)),\n});\n\nconst mapStateToProps = ({ questions, player }) => ({\n  getQuestions: questions.questions,\n  getQuestionsDifficulty: questions.difficulty,\n  getLoading: questions.loading,\n  getQuestionNumber: questions.questionNumber,\n  answered: questions.answered,\n  isCorrect: questions.correct,\n  name: player.name,\n  email: player.gravatarEmail,\n  getScore: questions.score,\n  getAssertions: questions.assertions,\n});\n\nGameScreen.propTypes = {\n  dispatchQuestions: func.isRequired,\n  getQuestions: arrayOf(objectOf).isRequired,\n  getLoading: bool.isRequired,\n  getQuestionNumber: number.isRequired,\n  answered: bool.isRequired,\n  answeredTrueIncorrect: func.isRequired,\n  storeScore: func.isRequired,\n  isCorrect: bool.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispathToProps)(GameScreen);\n"]},"metadata":{},"sourceType":"module"}